!function(e){function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}var t={};o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},o.p="",o(o.s=0)}([function(e,o){!function(e){function o(){this.handleLogInfo=function(e,o){var t=localStorage[e]?localStorage[e]:"";switch(e){case b:localStorage[b]=t+JSON.stringify(o)+"$$$";break;case S:localStorage[S]=t+JSON.stringify(o)+"$$$";break;case x:localStorage[x]=t+JSON.stringify(o)+"$$$"}console.log(o),console.log(localStorage[S])}}function t(){this.happenTime=(new Date).getTime(),this.webMonitorId=f,this.simpleUrl=e.location.href.split("?")[0].replace("#",""),this.customerKey=O.getCustomerKey(),this.pageKey=O.getPageKey(),this.deviceName=I.deviceName,this.os=I.os+(I.osVersion?" "+I.osVersion:""),this.browserName=I.browserName,this.browserVersion=I.browserVersion,this.monitorIp="",this.country="china",this.province="",this.city="";var o=localStorage.wmUserInfo?JSON.parse(localStorage.wmUserInfo):"";this.userId=o.userId||"",this.firstUserParam=o.firstUserParam||"",this.secondUserParam=o.secondUserParam||""}function r(e,o,r){t.apply(this),this.uploadType=e,this.loadType=o,this.loadTime=r}function n(e,o,r,n,a,i,s){t.apply(this),this.uploadType=e,this.behaviorType=o,this.className=r,this.placeholder=n,this.inputValue=a,this.tagName=i,this.innerText=s}function a(e,o,r){t.apply(this),this.uploadType=e,this.errorMessage=encodeURIComponent(o),this.errorStack=r,this.browserInfo=N}function i(){var o=e.location.href.split("?")[0].replace("#","");g!=o&&(s(),g=o)}function s(){O.setPageKey();const e=new r(x,"none",0);e.handleLogInfo(x,e)}function c(){function o(e,o,t,r,n){i();var s=e||"",c=n||"",l="";if(s){l=JSON.stringify(c).split(": ")[0].replace('"',"")}var p=new a(S,l+": "+s,c);u?setTimeout(function(){O.screenShot(document.body,function(e){document.getElementById("testImg").src="data:image/png;base64,"+Base64String.decompress(e),p.screenShot=e,p.handleLogInfo(S,p)})},200):p.handleLogInfo(S,p)}var t=console.error;console.error=function(){var e=arguments[0]&&arguments[0].message,r=h,n=arguments[0]&&arguments[0].stack;return n||(n=arguments[0]),!d&&o(e,r,0,0,n),t.apply(console,arguments)},e.onerror=function(e,t,r,n,a){d=!0,o(e,t,r,n,a?a.stack:null)}}function l(e){e&&e.record&&1==e.record&&(i(),document.onclick=function(e){var o="",t="",r="",a=e.target.tagName,i="";"svg"!=e.target.tagName&&"use"!=e.target.tagName&&(o=e.target.className?e.target.className.replace(/\s/g,""):"",t=encodeURIComponent(e.target.placeholder||""),r=encodeURIComponent(e.target.value||""),i=encodeURIComponent(e.target.innerText.replace(/\s*/g,"")),i.length>200&&(i=i.substring(0,100)+"... ..."+i.substring(i.length-99,i.length-1)),i=i.replace(/\s/g,""));var s=new n(b,"click",o,t,r,a,i);s.handleLogInfo(b,s)})}function p(){this.getUuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)})},this.getCustomerKey=function(){var e=this.getUuid();return localStorage.monitorCustomerKey||(localStorage.monitorCustomerKey=e),localStorage.monitorCustomerKey},this.getPageKey=function(){var e=this.getUuid();return localStorage.monitorPageKey||(localStorage.monitorPageKey=e),localStorage.monitorPageKey},this.setPageKey=function(){localStorage.monitorPageKey=this.getUuid()},this.ajax=function(o,t,r,n,a){var i=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.open(o,t,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4==i.readyState&&200==i.status){var e=JSON.parse(i.responseText);"function"==typeof n&&n(e)}else"function"==typeof a&&a()},i.send("data="+JSON.stringify(r))},this.getDevice=function(){var o={},t=navigator.userAgent,r=t.match(/(Android);?[\s\/]+([\d.]+)?/),n=t.match(/(iPad).*OS\s([\d_]+)/),a=t.match(/(iPod)(.*OS\s([\d_]+))?/),i=!n&&t.match(/(iPhone\sOS)\s([\d_]+)/),s=t.match(/Android\s[\S\s]+Build\//);if(o.ios=o.android=o.iphone=o.ipad=o.androidChrome=!1,o.isWeixin=/MicroMessenger/i.test(t),o.os="web",o.deviceName="PC",r&&(o.os="android",o.osVersion=r[2],o.android=!0,o.androidChrome=t.toLowerCase().indexOf("chrome")>=0),(n||i||a)&&(o.os="ios",o.ios=!0),i&&!a&&(o.osVersion=i[2].replace(/_/g,"."),o.iphone=!0),n&&(o.osVersion=n[2].replace(/_/g,"."),o.ipad=!0),a&&(o.osVersion=a[3]?a[3].replace(/_/g,"."):null,o.iphone=!0),o.ios&&o.osVersion&&t.indexOf("Version/")>=0&&"10"===o.osVersion.split(".")[0]&&(o.osVersion=t.toLowerCase().split("version/")[1].split(" ")[0]),o.iphone){o.deviceName="iphone";var c=e.screen.width,l=e.screen.height;320===c&&480===l?o.deviceName="iphone 4":320===c&&568===l?o.deviceName="iphone 5/SE":375===c&&667===l?o.deviceName="iphone 6/7/8":414===c&&736===l?o.deviceName="iphone 6/7/8 Plus":375===c&&812===l&&(o.deviceName="iphone X")}else if(o.ipad)o.deviceName="ipad";else if(s){var p=s[0],d=p.split(";")[1].replace(/Build\//g,"");o.deviceName=d.replace(/(^\s*)|(\s*$)/g,"")}if(-1==t.indexOf("Mobile")){var u=navigator.userAgent.toLowerCase(),g=/msie [\d.]+;/gi,f=/firefox\/[\d.]+/gi,m=/chrome\/[\d.]+/gi,h=/safari\/[\d.]+/gi;if(o.browserName="未知",u.indexOf("msie")>0){var w=u.match(g)[0];o.browserName=w.split("/")[0],o.browserVersion=u}if(u.indexOf("firefox")>0){var w=u.match(f)[0];o.browserName=w.split("/")[0],o.browserVersion=u}if(u.indexOf("safari")>0&&u.indexOf("chrome")<0){var w=u.match(h)[0];o.browserName=w.split("/")[0],o.browserVersion=u}if(u.indexOf("chrome")>0){var w=u.match(m)[0];o.browserName=w.split("/")[0],o.browserVersion=u}}return o.webView=(i||n||a)&&t.match(/.*AppleWebKit(?!.*Safari)/i),o},this.loadJs=function(e,o){var t=document.createElement("script");t.async=1,t.src=e,t.onload=o;var r=document.getElementsByTagName("script")[0];return r.parentNode.insertBefore(t,r),r}}localStorage||(e.localStorage=new Object),localStorage.wmUserInfo="";var d=!1,u=!1,g=e.location.href.split("?")[0].replace("#",""),f="mcl_webmonitor",m=-1===e.location.href.indexOf("https")?"http://":"https://",h=e.location.href,w=-1==h.indexOf("localhost")?m+"www.webfunny.cn":m+"localhost:8010",v=w+"/api/v1/uploadLog",y=w+"",x="CUSTOMER_PV",S="JS_ERROR",b="ELE_BEHAVIOR",N=e.navigator.userAgent,O=new p,I=O.getDevice();localStorage.wmUserInfo&&JSON.parse(localStorage.wmUserInfo);r.prototype=new o,n.prototype=new o,a.prototype=new o,a.prototype=new o,function(){s(),l({record:1}),c();var e=0;setInterval(function(){if(i(),e>=5){var o=(localStorage[b]||"")+(localStorage[S]||"")+(localStorage[x]||"");o&&O.ajax("POST",v,{logInfo:o},function(e){200===e.code&&(localStorage[b]="",localStorage[S]="",localStorage[x]="")},function(){localStorage[b]="",localStorage[S]="",localStorage[x]=""}),e=0}e++},1e3)}(),e.webfunny={wm_upload:function(o,t,r,n){var a=(new Date).toString(),i={createTime:encodeURIComponent(a),happenTime:(new Date).getTime(),uploadType:"WM_UPLOAD",simpleUrl:encodeURIComponent(o),webMonitorId:f,recordType:t,recordIndex:r,description:n},s=y,c=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");c.open("POST",s,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send("data="+JSON.stringify([i]))},wm_init_user:function(e,o,t){e||console.warn("userId 初始化值为0(不推荐) 或者 未初始化"),o||console.warn("firstParam 初始化值为0(不推荐) 或者 未初始化"),t||console.warn("secondParam 初始化值为0(不推荐) 或者 未初始化"),localStorage.wmUserInfo=JSON.stringify({userId:e,firstUserParam:o,secondUserParam:t})}},function(){function o(e,o){o=o||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,o.bubbles,o.cancelable,o.detail),t}if("function"==typeof e.CustomEvent)return!1;o.prototype=e.Event.prototype,e.CustomEvent=o}()}(window)}]);